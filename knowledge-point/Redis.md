## 第一章：数据结构相关

#### 1.1 redis键值对

​	redis键到值的过程使用的是哈希表，时间复杂度是o(1)，但是redis的值有多中存储方式。

#####1.1.1 哈希冲突和rehash、渐进式哈希

​	当你往 Redis 中写入大量数据后，就可能发现操作有时候会突然变慢了。这其实是因为你忽略了一个潜在的风险点，那就是哈希表的冲突问题和 rehash 可能带来的操作阻塞。

 * 链式哈希：

   redis采用的是链式哈希，同一个哈希桶中的多个元素用一个链表来保存，它们之间依次用指针连接。

   * 缺点 ：

     哈希冲突链上的元素只能通过指针逐一查找再操作。如果哈希表里写入的数据越来越多，哈希冲突可能也会越来越多，这就会导致某些哈希冲突链过长，进而导致这个链上的元素查找耗时长，效率降低

     

 * rehash：（两个不同大小的redis全局哈希表1 和2），三步：

   1.给哈希表 2 分配更大的空间，例如是当前哈希表 1 大小的两倍；

   2.把哈希表 1 中的数据重新映射并拷贝到哈希表 2 中；

   3.释放哈希表 1 的空间。

   * 缺点：

     如果一次性把哈希表 1 中的数据都迁移完，会造成 Redis 线程阻塞，无法服务其他请求。此时，Redis 就无法快速访问数据了。为了避

​	

​	